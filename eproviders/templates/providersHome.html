{% extends "baseInterface.html" %}

{% block title %} Proveedores {% endblock %}

{% block body %}

<head>
    {% load static %}
    <link rel="stylesheet" href="{% static 'css/StyleProv.css' %}">
</head>

<center>
    <h1 class="modtitles">Gestión de Proveedores</h1>
</center>
<br>
<div class="card mb-4">
    <div class="card-header py-3 d-flex justify-content-between align-items-center">
        <div class="d-flex flex-row">
            <span class="mx-2">
                <a href="{% url 'crearProveedor' %}" class="btn btn-succes btn-adder btn-lg" data-toggle="tooltip"
                    data-placement="top" title="Crear un Proveedor">
                    <i class="fa-solid fa-plus mr-2"></i><span class="text"
                        style="font-weight: 600; font-size: 16px;">Agregar Proveedor</span>
                </a>
            </span>
        </div>

        <div class="d-flex align-items-center mx-2">
            <a href="#" class="btn btn-danger btn-dash btn-lg" data-toggle="tooltip" data-placement="top"
                title="Descargar PDF con Registros">
                <i class="fa-solid fa-download mr-2"></i><span class="text"
                    style="font-weight: 600; font-size: 16px;">Generar Informe</span>
            </a>
        </div>
    </div>
</div>
<div class="card shadow mb-4">
    <div class="card-header py-4">
        <div class="table-responsive">
        <table class="table table-bordered mx-auto text-center" id="dataTable" width="auto">
            <thead class="theads">
                <tr>
                    <th>Nombre </th>
                    <th>Teléfono</th>
                    <th>Correo Electrónico</th>
                    <th>Estado</th>
                    <th>Acciones</th>
                </tr>
            </thead>
            <tbody>
                {% for proveedor in proveedores %}
                <tr class="{% if proveedor.estado == 0 %}inactivo{% endif %}">
                    <td>{{ proveedor.nombre_proveedor }}</td>
                    <td>{{ proveedor.telefono }}</td>
                    <td>{{ proveedor.correo }}</td>
                    <td>
                        <button
                            class="cambiar-estado statusbutton mx-3 {% if proveedor.estado == 1 %}active-status{% else %}inactive-status{% endif %}"
                            data-proveedor-id="{{ proveedor.id_proveedor }}" data-url-state="{% url 'cambiarEstadoProveedor'  %}"
                            data-nuevo-estado="{% if proveedor.estado == 1 %}0{% else %}1{% endif %}">
                            {% if proveedor.estado == 1 %}
                            Activo
                            {% else %}
                            Inactivo
                            {% endif %}
                        </button>
                    </td>
                    <td>
                        <a href="{% url 'editarProveedor' proveedor.id_proveedor %}" class="btn btn-sm mr-2"
                            id="editbutton"><i class="fa-solid fa-pen-to-square"></i></a>
                        <button type="button" class="btn btn-sm btn-primary verProveedor ml-2"
                            data-prov-id="{{ proveedor.id_proveedor }}" data-url-details="{% url 'verDetallesProveedor' %}">
                            <i class="fa-solid fa-eye"></i>
                        </button>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    </div>
</div>

<div class="modal-backdrop"></div>

<dialog id="verDetallesDialog" class="proveedorDialog dragHandle">
    <form method="dialog">
        <div class="modal-container-header">
            <div class="estadoProveedorCircle"></div>
            <h2>Información del Proveedor</h2>
            <button class="cerrar-proveedor" type="button" id="cerrarDetallesProveedor">
                <svg height="24" width="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path d="M0 0h24v24H0z" fill="none"></path>
                    <path
                        d="M12 10.586l4.95-4.95 1.414 1.414-4.95 4.95 4.95 4.95-1.414 1.414-4.95-4.95-4.95 4.95-1.414-1.414 4.95-4.95-4.95-4.95L7.05 5.636z"
                        fill="currentColor"></path>
                </svg>
            </button>
        </div>
        <div id="identificacionRow" class="cont-identificacion">Identificación : <span id="tipo"
                class="mr-2"></span><span id="identificacion"></span></div>
        <section class="seccion-detalles">
            <div>
                <p>Nombre del Proveedor: <span class="proveedor-info" id="nombreProveedor"></p>
                <p>Teléfono: <span class="proveedor-info" id="telefonoProveedor"></span></p>
            </div>
            <div>
                <p>Correo: <span id="correoProveedor"></span></p>
                <p id="direccionRow">Dirección : <span id="direccion"></span></p>
            </div>
        </section>
        <div id="informacionRow" class="informacion-adicional">
            <p>Información Adicional :</p>
            <p id="informacion"></p>
        </div>
    </form>
</dialog>

<script src="{% static 'js/indexProv.js' %}"></script>


{% endblock %}